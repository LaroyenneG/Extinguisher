#!/bin/bash


showAdv=0;

while [[ 1 ]]; do

	status=$(sensors | grep "Core");

	echo "$status" | while read line; do

		line=${line#*:};
		line=${line%(*};
		line=${line%.*};
		line=${line#*+};

		if [[ "$line" -ge "70" ]]; then
			shutdown now;
			exit;
		fi

		if [ "$line" -ge "55" ] && [ $showAdv -ne 1 ]; then
			notify-send "Attention surchauffe" "Température du processeur excessive $line°C";
			showAdv=1;
		else
			showAdv=0;
		fi

	done

	sleep 5;
done

